PS C:\Users\AYUSH\work\ai-stuff\test-AI-log-engine> python test_split_orchestrator.py
╭──────────────────────────────────╮
│ Split Orchestrator Tests         │
│ Planning Agent + Execution Agent │
╰──────────────────────────────────╯
✓ Found test.csv

Initializing...
[12/02/25 18:56:11] INFO     Initialized OllamaClient (base_url=http://localhost:11434, model=llama3.1:latest)
  ✓ LLM: llama3.1:latest
                    INFO     Initialized LogProcessor for test.csv with schema 'default'
                    INFO     Initialized EntityManager
  ✓ Tools: 13 loaded
  ✓ Registry: 13 registered
                    INFO     PlanningAgent initialized
                    INFO     ExecutionAgent initialized
                    INFO     SplitOrchestrator initialized
  ✓ Split Orchestrator ready

======================================================================
SIMPLE TESTS
======================================================================

======================================================================
Query: count all logs
======================================================================
                    INFO     ======================================================================
                    INFO     SPLIT ORCHESTRATOR - Query: count all logs
                    INFO     ======================================================================
                    INFO
                             📋 PLANNING PHASE
                    INFO     Planning for query: 'count all logs'
[12/02/25 18:56:20] INFO     Generation successful: 93 chars, took 6.87s
                    INFO     Created plan with 2 steps
                    INFO       Step 1: search_logs {}
                    INFO       Step 2: get_log_count {}
                    INFO
                             ⚙️  EXECUTION PHASE                                                                        
                    INFO     Executing plan with 2 steps
                    INFO
                             ──────────────────────────────────────────────────
                    INFO     Step 1/2: search_logs
                    INFO     Parameters: {}
                    INFO     Loaded 2115 log entries
                    INFO     ✓ Success: Found 2115 logs
                    INFO     📦 Cached 2115 logs
                    INFO
                             ──────────────────────────────────────────────────
                    INFO     Step 2/2: get_log_count
                    INFO     Parameters: {}
                    INFO     ✓ Auto-injected 2115 cached logs
                    INFO     ✓ Success: Log count: 2115
                    INFO
                             ======================================================================
                    INFO     ✅ ANALYSIS COMPLETE
                    INFO     Success: False
                    INFO     Steps: 2/2
                    INFO     Duration: 8.95s
                    INFO     ======================================================================

Result:
  Success: False
  Steps: 2/2
  Duration: 8.95s
  Confidence: 0.00

Answer:
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Plan executed but no answer provided                                                                                 │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✗ Missing keywords: 2115, logs

======================================================================
Query: search for logs with MAWED07T01
======================================================================
                    INFO     ======================================================================
                    INFO     SPLIT ORCHESTRATOR - Query: search for logs with MAWED07T01
                    INFO     ======================================================================
                    INFO
                             📋 PLANNING PHASE
                    INFO     Planning for query: 'search for logs with MAWED07T01'
[12/02/25 18:56:23] INFO     Generation successful: 198 chars, took 1.66s
                    INFO     Created plan with 2 steps
                    INFO       Step 1: search_logs {'value': 'MAWED07T01'}
                    INFO       Step 2: extract_entities {'entity_types': ['cm', 'md_id']}
                    INFO
                             ⚙️  EXECUTION PHASE                                                                        
                    INFO     Executing plan with 2 steps
                    INFO
                             ──────────────────────────────────────────────────
                    INFO     Step 1/2: search_logs
                    INFO     Parameters: {'value': 'MAWED07T01'}
                    INFO     ✓ Success: Found 3 logs containing 'MAWED07T01'
                    INFO     📦 Cached 3 logs
                    INFO
                             ──────────────────────────────────────────────────
                    INFO     Step 2/2: extract_entities
                    INFO     Parameters: {'entity_types': ['cm', 'md_id']}
                    INFO     ✓ Auto-injected 3 cached logs
                    INFO     Extracting 2 entity types from 3 log entries
                    INFO     Search columns: ['_source.log']
                    INFO     Processing entity type: cm
                    INFO     Processing entity type: md_id
                    INFO     Extracted 1 unique entities
                    INFO     ✓ Success: Extracted 1 entities: md_id: [0x6a030000]
                    INFO
                             ======================================================================
                    INFO     ✅ ANALYSIS COMPLETE
                    INFO     Success: False
                    INFO     Steps: 2/2
                    INFO     Duration: 3.71s
                    INFO     ======================================================================

Result:
  Success: False
  Steps: 2/2
  Duration: 3.71s
  Confidence: 0.00

Answer:
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Plan executed but no answer provided                                                                                 │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✗ Missing keywords: 3, logs, MAWED07T01

======================================================================
Query: find all cms connected to rpd MAWED07T01
======================================================================
                    INFO     ======================================================================
                    INFO     SPLIT ORCHESTRATOR - Query: find all cms connected to rpd MAWED07T01
                    INFO     ======================================================================
                    INFO
                             📋 PLANNING PHASE
                    INFO     Planning for query: 'find all cms connected to rpd MAWED07T01'
[12/02/25 18:56:28] INFO     Generation successful: 406 chars, took 2.77s
                    INFO     Created plan with 4 steps
                    INFO       Step 1: search_logs {}
                    INFO       Step 2: extract_entities {'entity_types': ['cm']}
                    INFO       Step 3: find_entity_relationships {'target_value': 'MAWED07T01', 'related_types':
                             ['rpdname']}
                    INFO       Step 4: finalize_answer {}
                    INFO
                             ⚙️  EXECUTION PHASE                                                                        
                    INFO     Executing plan with 4 steps
                    INFO
                             ──────────────────────────────────────────────────
                    INFO     Step 1/4: search_logs
                    INFO     Parameters: {}
                    INFO     ✓ Success: Found 2115 logs
                    INFO     📦 Cached 2115 logs
                    INFO
                             ──────────────────────────────────────────────────
                    INFO     Step 2/4: extract_entities
                    INFO     Parameters: {'entity_types': ['cm']}
                    INFO     ✓ Auto-injected 2115 cached logs
                    INFO     Extracting 1 entity types from 2115 log entries
                    INFO     Search columns: ['_source.log']
                    INFO     Processing entity type: cm
                    INFO     Extracted 0 unique entities
                    INFO     ✓ Success: No entities of types ['cm'] found
                    INFO
                             ──────────────────────────────────────────────────
                    INFO     Step 3/4: find_entity_relationships
                    INFO     Parameters: {'target_value': 'MAWED07T01', 'related_types': ['rpdname']}
                    INFO     ✓ Auto-injected 2115 cached logs
                    INFO     Extracting 1 entity types from 3 log entries
                    INFO     Search columns: ['_source.log']
                    INFO     Processing entity type: rpdname
                    INFO     Extracted 1 unique entities
                    INFO     ✓ Success: Found 1 related entities for 'MAWED07T01': rpdname: [MAWED07T01]
                    INFO
                             ──────────────────────────────────────────────────
                    INFO     Step 4/4: finalize_answer
                    INFO     Parameters: {}
                    INFO     ✓ Finalized: No answer provided...
                    INFO
                             ======================================================================
                    INFO     ✅ ANALYSIS COMPLETE
                    INFO     Success: True
                    INFO     Steps: 4/4
                    INFO     Duration: 4.97s
                    INFO     ======================================================================

Result:
  Success: True
  Steps: 4/4
  Duration: 4.97s
  Confidence: 0.80

Answer:
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ No answer provided                                                                                                   │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✗ Missing keywords: cm, MAWED07T01

======================================================================
SUMMARY
======================================================================
┏━━━━━━━━━━━━━━┳━━━━━━━┓
┃ Metric       ┃ Value ┃
┡━━━━━━━━━━━━━━╇━━━━━━━┩
│ Tests Passed │   1/3 │
│ Success Rate │   33% │
└──────────────┴───────┘

⚠ PARTIAL SUCCESS
1/3 tests passed - review failures
PS C:\Users\AYUSH\work\ai-stuff\test-AI-log-engine>